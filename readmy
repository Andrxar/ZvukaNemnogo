# GitHub Actions: Озвучка книги с контролем размера

## Описание

Этот проект позволяет разбивать текстовую книгу на озвученные mp3-фрагменты с помощью OpenAI FM через GitHub Actions.  
Скрипт автоматически разбивает текст, озвучивает его, сохраняет mp3-файлы с выбранной пользователем частотой дискретизации, и контролирует общий размер выходных файлов (~450 МБ).  
После достижения лимита — ожидает ручного скачивания и удаления файлов пользователем, затем продолжает работу с места остановки.

---

## Как использовать

1. **Положите текстовый файл в корень репозитория** (например, `Royzman_Delo-306-Volk-Vor-nevidimka.txt`).

2. **Настройте параметры перед запуском:**
    - В начале файла `tts_batch.py` укажите:
        - Имя текстового файла.
        - Желаемую частоту дискретизации (например, 22, 24, 26, 28 кГц).

3. **Запустите GitHub Actions вручную:**
    - Зайдите во вкладку Actions → выберите workflow → "Run workflow".

4. **Скачайте готовые mp3-файлы:**
    - После остановки workflow (когда размер файлов достигнет лимита) скачайте артефакт с mp3.
    - Удалите все mp3-файлы в папке-артефакте, оставив только последний.

5. **Продолжите работу:**
    - Снова вручную запустите workflow.
    - Скрипт продолжит озвучку с нужного места.

6. **Повторяйте шаги 4-5, пока вся книга не будет озвучена.**

---

## Важно!

- Все mp3-фрагменты сохраняются в отдельную папку (название совпадает с текстовым файлом).
- Лог событий и ошибок сохраняется автоматически.
- Не удаляйте последний mp3-файл перед следующим запуском, чтобы не потерять прогресс!
- Если нужно изменить параметры (имя файла, частоту), делайте это только перед запуском workflow.

---

## Настройка уведомлений

**Рекомендуется включить уведомления, чтобы не пропустить окончание процесса:**

### 1. Email-уведомления

- Перейдите в настройки: https://github.com/settings/notifications
- Убедитесь, что включены Notifications для workflow и выбран email.

### 2. Push-уведомления (на телефон)

- Установите приложение [GitHub для Android](https://play.google.com/store/apps/details?id=com.github.android) или [GitHub для iOS](https://apps.apple.com/us/app/github/id1477376905).
- Залогиньтесь и разрешите push-уведомления.
- В разделе "Notifications" настройте типы оповещений.

---

## Зависимости

Все нужные библиотеки указаны в `requirements.txt`.  
Устанавливаются автоматически при запуске workflow.

---

## Краткая схема работы (для пользователя)

```
1. Положить текстовый файл в репозиторий.
2. Запустить workflow (Actions → Run workflow).
3. Дождаться завершения (придёт уведомление).
4. Скачать mp3-архив из artefacts.
5. Скопировать себе, удалить все mp3 кроме последнего.
6. Запустить workflow снова.
7. Повторять, пока не будет озвучен весь текст.
```

---

## Логика работы скрипта

- Скрипт ищет указанный текстовый файл.
- Делит текст на части, озвучивает их, сохраняет mp3-фрагменты.
- Как только суммарный размер mp3-файлов превышает ~450 МБ — процесс останавливается и ждёт ручного продолжения.
- После удаления файлов (кроме последнего) скрипт продолжает работу с нужного места.

---

## Контакты и помощь

В случае вопросов — пишите в Issues репозитория!
